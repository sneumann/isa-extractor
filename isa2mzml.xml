<!-- vi: se fdm=marker : -->
<tool id="isa2mzl" name="ISA to mzML" version="1.1.0">

	<description>Extract mzML files from an ISA dataset and output a collection of mzML dataset.</description>

	<!-- Command {{{1 -->

	<command><![CDATA[
		## @@@BEGIN_CHEETAH@@@

		$__tool_directory__/extract-from-isa
		-i "$isa.extra_files_path"
		-e mzML
		-o mzML

		## @@@END_CHEETAH@@@
	]]></command>

	<!-- Inputs {{{1 -->

	<inputs>
		<param name="isa" label="ISA" type="data" format="isa-tab"/>
	</inputs>

	<!-- Outputs {{{1 -->

    <outputs>
		<collection name="mzML" type="list" label="mzML files">
			<discover_datasets pattern="__name_and_ext__" directory="mzML" format="mzml"/>
		</collection>
	</outputs>

	<!-- Tests {{{1 -->
	<tests>
		<test>
			<param name="isa" value="MTBLS30.zip" ftype="isa"/>
			<output name="w4m_variable_metadata" file="MTBLS30-w4m-variable-metadata.tsv"/>
			<output name="w4m_sample_metadata" file="MTBLS30-w4m-sample-metadata.tsv"/>
			<output name="w4m_data_matrix" file="MTBLS30-w4m-sample-variable-matrix.tsv"/>
		</test>
	</tests>

	<!-- Help {{{1 -->
    <help>
<!-- @@@BEGIN_RST@@@ -->

====================
ISA to W4M converter
====================

Converts an ISA-Tab dataset into W4M 3 files format.

------
Inputs
------

ISA dataset
===========

The ISA-Tab dataset to convert to W4M format.

Study to extract
================

The file name of the study to extract from the ISA dataset.

Assay to extract
================

The file name of the assay to extract from the ISA dataset chosen study.

Sample NA filtering
===================

This is a comma separated list of column names from the sample metadata dataset.
Rows containg NA values in one or more of the listed columns will be removed from the dataset.

Variable NA filtering
=====================

This is a comma separated list of column names from the variable metadata dataset.
Rows containg NA values in one or more of the listed columns will be removed from the dataset.

-------
Outputs
-------

The output is a set of 3 datasets:

 - Samples metadata.
 - Variables metadata.
 - Samples x variables matrix. 

<!-- @@@END_RST@@@ -->
    </help>

	<!-- Citations {{{1 -->
    <citations>
        <citation type="doi">10.1038/ng.1054</citation> <!-- ISA -->
        <citation type="doi">10.1093/bioinformatics/btu813</citation> <!-- W4M -->
    </citations>

</tool>
